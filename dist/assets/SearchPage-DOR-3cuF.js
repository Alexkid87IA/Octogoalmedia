import{j as e}from"./sanity-DxjeYfqd.js";import{h as q,r as a,L as y}from"./react-vendor-Lq1VaXCH.js";import{S as D}from"./SEO-CQRzM7zp.js";import{F as I}from"./Footer-Dp1HAqUh.js";import{i as O}from"./sanityAPI-CSsVss31.js";import{h as Q}from"./index-CWl0sDhy.js";import{S as w,X as U,m as $,x as G,b as N}from"./ui-CoLpaw0B.js";const K=()=>{const[v,o]=q(),l=v.get("q")||"",[r,h]=a.useState(l),[n,m]=a.useState([]),[k,u]=a.useState(!1),[S,x]=a.useState(!1),[p,A]=a.useState([]);a.useEffect(()=>{(async()=>{try{const s=await O();A(s||[])}catch{}})()},[]),a.useEffect(()=>{l&&d(l)},[l,p]);const d=t=>{if(!t.trim()){m([]),x(!1);return}u(!0),x(!0);const s=t.toLowerCase().trim(),c=p.filter(i=>{var f,g,b;const F=(f=i.title)==null?void 0:f.toLowerCase().includes(s),E=(g=i.excerpt)==null?void 0:g.toLowerCase().includes(s),M=(b=i.categories)==null?void 0:b.some(P=>{var j;return(j=P.title)==null?void 0:j.toLowerCase().includes(s)});return F||E||M});m(c),u(!1)},R=t=>{t.preventDefault(),r.trim()&&(o({q:r.trim()}),d(r))},z=()=>{h(""),m([]),x(!1),o({})},L=t=>{var s;if(!((s=t.mainImage)!=null&&s.asset))return null;try{return Q(t.mainImage).width(400).height(250).url()}catch{return null}},C=t=>t?new Date(t).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"";return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:r?`Recherche: ${r}`:"Recherche",description:"Recherchez parmi tous les articles d'Octogoal"}),e.jsx("div",{className:"min-h-screen bg-black text-white pt-24 pb-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4",children:"Recherche"}),e.jsx("p",{className:"text-gray-400",children:"Trouvez des articles sur le football"})]}),e.jsx("form",{onSubmit:R,className:"mb-10",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:t=>h(t.target.value),placeholder:"Rechercher un article, un joueur, un club...",className:"w-full px-6 py-4 pl-14 bg-white/5 border border-white/10 rounded-2xl text-white placeholder-gray-500 focus:outline-none focus:border-pink-500/50 focus:bg-white/10 transition-all text-lg",autoFocus:!0}),e.jsx(w,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-gray-500",size:22}),r&&e.jsx("button",{type:"button",onClick:z,className:"absolute right-16 top-1/2 -translate-y-1/2 p-2 text-gray-500 hover:text-white transition-colors",children:e.jsx(U,{size:20})}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 px-4 py-2 bg-gradient-to-r from-pink-500 to-blue-500 rounded-xl text-white font-medium hover:opacity-90 transition-opacity",children:"Rechercher"})]})}),k?e.jsx("div",{className:"flex justify-center py-16",children:e.jsx("div",{className:"w-10 h-10 border-3 border-pink-500 border-t-transparent rounded-full animate-spin"})}):S?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6 text-gray-400",children:n.length===0?e.jsxs("p",{children:['Aucun résultat pour "',e.jsx("span",{className:"text-white",children:l}),'"']}):e.jsxs("p",{children:[n.length," résultat",n.length>1?"s":"",' pour "',e.jsx("span",{className:"text-white",children:l}),'"']})}),e.jsx("div",{className:"space-y-4",children:n.map((t,s)=>{var i;const c=L(t);return e.jsx($.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},children:e.jsxs(y,{to:`/article/${t.slug.current}`,className:"group flex gap-4 p-4 bg-white/[0.03] hover:bg-white/[0.06] border border-white/10 hover:border-pink-500/30 rounded-xl transition-all",children:[c&&e.jsx("div",{className:"w-24 h-20 sm:w-32 sm:h-24 rounded-lg overflow-hidden flex-shrink-0 bg-gray-800",children:e.jsx("img",{src:c,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[((i=t.categories)==null?void 0:i[0])&&e.jsx("span",{className:"inline-block px-2 py-0.5 mb-2 text-[10px] font-bold uppercase bg-pink-500/20 text-pink-400 rounded",children:t.categories[0].title}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-white group-hover:text-pink-400 transition-colors line-clamp-2 mb-1",children:t.title}),t.excerpt&&e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2 hidden sm:block",children:t.excerpt}),t.publishedAt&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-gray-500",children:[e.jsx(G,{size:12}),e.jsx("span",{children:C(t.publishedAt)})]})]}),e.jsx(N,{className:"hidden sm:block w-5 h-5 text-gray-500 group-hover:text-pink-400 group-hover:translate-x-1 transition-all flex-shrink-0 self-center"})]})},t._id)})}),n.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-white/5 flex items-center justify-center",children:e.jsx(w,{size:32,className:"text-gray-500"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Essayez avec d'autres mots-clés"}),e.jsxs(y,{to:"/articles",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-blue-500 rounded-xl text-white font-medium hover:opacity-90 transition-opacity",children:["Voir tous les articles",e.jsx(N,{size:18})]})]})]}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-gray-400 mb-8",children:"Recherchez un article, un joueur, un club..."}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["Mbappé","PSG","Real Madrid","Ligue 1","Champions League","Mercato"].map(t=>e.jsx("button",{onClick:()=>{h(t),o({q:t}),d(t)},className:"px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-full text-sm text-gray-300 hover:text-white transition-all",children:t},t))})]})]})}),e.jsx(I,{})]})};export{K as SearchPage,K as default};
