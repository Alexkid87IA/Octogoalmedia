const i="/api/football",d={};function u(e){const r=d[e];return r?Date.now()-r.timestamp>3e5?(delete d[e],null):r.data:null}function l(e,r){d[e]={data:r,timestamp:Date.now()}}const g={LIGUE_1:"FL1",PREMIER_LEAGUE:"PL",LA_LIGA:"PD",SERIE_A:"SA",BUNDESLIGA:"BL1",CHAMPIONS_LEAGUE:"CL"},E={FL1:{name:"Ligue 1",flag:"ðŸ‡«ðŸ‡·",color:"from-blue-600 to-blue-800",totalMatchdays:34},PL:{name:"Premier League",flag:"ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿",color:"from-purple-600 to-purple-800",totalMatchdays:38},PD:{name:"La Liga",flag:"ðŸ‡ªðŸ‡¸",color:"from-red-600 to-orange-600",totalMatchdays:38},SA:{name:"Serie A",flag:"ðŸ‡®ðŸ‡¹",color:"from-green-600 to-green-800",totalMatchdays:38},BL1:{name:"Bundesliga",flag:"ðŸ‡©ðŸ‡ª",color:"from-red-600 to-yellow-500",totalMatchdays:34},CL:{name:"Champions League",flag:"ðŸ†",color:"from-blue-900 to-indigo-900",totalMatchdays:8}};async function p(e){var n;const r=`standings_${e}`,a=u(r);if(a)return a;try{const t=await fetch(`${i}/competitions/${e}/standings`);if(!t.ok)return console.error("Erreur API:",t.status),[];const s=(n=(await t.json()).standings)==null?void 0:n.find(h=>h.type==="TOTAL"),c=(s==null?void 0:s.table)||[];return l(r,c),c}catch(t){return console.error("Erreur getStandings:",t),[]}}async function w(e,r=10){const a=`fixtures_${e}_${r}`,n=u(a);if(n)return n;try{const t=await fetch(`${i}/competitions/${e}/matches?status=SCHEDULED&limit=${r}`);if(!t.ok)return[];const s=(await t.json()).matches||[];return l(a,s),s}catch(t){return console.error("Erreur getNextFixtures:",t),[]}}async function L(e){const r=`scorers_${e}`,a=u(r);if(a)return a;try{const n=await fetch(`${i}/competitions/${e}/scorers`);if(!n.ok)return[];const o=(await n.json()).scorers||[];return l(r,o),o}catch(n){return console.error("Erreur getTopScorers:",n),[]}}async function $(e,r){const a=`matchday_${e}_${r}`,n=u(a);if(n)return n;try{const t=await fetch(`${i}/competitions/${e}/matches?matchday=${r}`);if(!t.ok)return[];const s=(await t.json()).matches||[];return l(a,s),s}catch(t){return console.error("Erreur getMatchesByMatchday:",t),[]}}async function D(e){var n;const r=`current_matchday_${e}`,a=u(r);if(a)return a;try{const t=await fetch(`${i}/competitions/${e}`);if(!t.ok)return 1;const s=((n=(await t.json()).currentSeason)==null?void 0:n.currentMatchday)||1;return l(r,s),s}catch(t){return console.error("Erreur getCurrentMatchday:",t),1}}async function _(e){const r=`team_details_${e}`,a=u(r);if(a)return a;try{const n=await fetch(`${i}/teams/${e}`);if(!n.ok)return null;const t=await n.json(),o={id:t.id,name:t.name,shortName:t.shortName,tla:t.tla,crest:t.crest,address:t.address,website:t.website,founded:t.founded,clubColors:t.clubColors,venue:t.venue,coach:t.coach,squad:t.squad||[],runningCompetitions:t.runningCompetitions||[]};return l(r,o),o}catch(n){return console.error("Erreur getTeamDetails:",n),null}}async function y(e,r){const a=`team_matches_${e}_${r||"all"}`,n=u(a);if(n)return n;try{let t=`${i}/teams/${e}/matches`;r&&(t+=`?status=${r}`);const o=await fetch(t);if(!o.ok)return[];const c=(await o.json()).matches||[];return l(a,c),c}catch(t){return console.error("Erreur getTeamMatches:",t),[]}}async function S(e,r=5){try{return(await y(e,"SCHEDULED")).slice(0,r)}catch(a){return console.error("Erreur getTeamNextMatches:",a),[]}}async function M(e,r=5){try{return(await y(e,"FINISHED")).sort((t,o)=>new Date(o.utcDate).getTime()-new Date(t.utcDate).getTime()).slice(0,r)}catch(a){return console.error("Erreur getTeamLastResults:",a),[]}}function A(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}function T(e,r){var c,h,m,f;if(e.status!=="FINISHED")return null;const a=(h=(c=e.score)==null?void 0:c.fullTime)==null?void 0:h.home,n=(f=(m=e.score)==null?void 0:m.fullTime)==null?void 0:f.away;if(a===null||n===null)return null;const t=e.homeTeam.id===r,o=t?a:n,s=t?n:a;return o>s?"win":o<s?"loss":"draw"}export{g as L,E as a,p as b,w as c,L as d,$ as e,A as f,D as g,T as h,_ as i,M as j,S as k};
