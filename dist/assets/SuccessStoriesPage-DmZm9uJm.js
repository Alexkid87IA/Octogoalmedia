import{j as e}from"./sanity-tkM5Czdy.js";import{r as l}from"./react-vendor-DFZZ7aeY.js";import{S as k}from"./SEO-9929qYz7.js";import{F as L}from"./Footer-DRo0zem4.js";import{s as T}from"./index-DejFnw6e.js";import{m as u,k as E,S as D,a6 as F,X as _,a9 as q,d as I,g as P}from"./ui-BAupG38P.js";const H=()=>{const[a,m]=l.useState([]),[n,h]=l.useState(""),[g,N]=l.useState("recent"),[o,f]=l.useState([]),[w,b]=l.useState(!0);l.useEffect(()=>{window.scrollTo(0,0)},[]),l.useEffect(()=>{(async()=>{try{b(!0);const r=await T.fetch(`*[_type == "article" && (
          contentType == "success-story" || 
          category->slug.current == "success" ||
          category->slug.current == "story" ||
          "success" in tags[] ||
          "story" in tags[] ||
          "parcours" in tags[] ||
          "entrepreneur" in tags[]
        )] | order(publishedAt desc) {
          _id,
          title,
          excerpt,
          "slug": slug.current,
          "mainImage": mainImage.asset->url,
          publishedAt,
          "category": category->title,
          tags,
          "author": author->{
            name,
            "image": image.asset->url
          }
        }`);f(r||[])}catch(t){console.error("Erreur lors de la récupération des articles:",t),f([])}finally{b(!1)}})()},[]);const x=l.useMemo(()=>{const s=new Set;return o.forEach(t=>{t.tags&&Array.isArray(t.tags)&&t.tags.forEach(r=>{r&&s.add(r.toLowerCase())})}),Array.from(s).sort()},[o]),S=s=>{m(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},j=()=>{m([]),h("")},i=o.filter(s=>{var c,d,y;const t=((c=s.title)==null?void 0:c.toLowerCase().includes(n.toLowerCase()))||((d=s.excerpt)==null?void 0:d.toLowerCase().includes(n.toLowerCase()))||((y=s.tags)==null?void 0:y.some(p=>p.toLowerCase().includes(n.toLowerCase()))),r=a.length===0||a.some(p=>{var v;return(v=s.tags)==null?void 0:v.some(A=>A.toLowerCase()===p)});return t&&r}).sort((s,t)=>g==="recent"?new Date(t.publishedAt).getTime()-new Date(s.publishedAt).getTime():0),C=l.useMemo(()=>{const s={};return x.forEach(t=>{s[t]=o.filter(r=>{var c;return(c=r.tags)==null?void 0:c.some(d=>d.toLowerCase()===t)}).length}),s},[x,o]);return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Success Stories | Octogoal Media",description:"Découvrez des parcours inspirants d'entrepreneurs et d'innovateurs qui ont transformé leur vision en réalité."}),e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsxs("section",{className:"relative pt-32 pb-20 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900/20 via-pink-900/20 to-orange-900/20"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(168,85,247,0.3),transparent_50%)]"})]}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsxs(u.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-500/10 backdrop-blur-sm rounded-full mb-6 border border-purple-500/20",children:[e.jsx(E,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-400",children:"Parcours inspirants"})]}),e.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6",children:e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-orange-400",children:"Success Stories"})}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Des histoires authentiques d'entrepreneurs et d'innovateurs qui ont osé transformer leur vision en réalité."})]})})]}),e.jsx("section",{className:"sticky top-20 z-40 bg-black/80 backdrop-blur-xl border-y border-white/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(D,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:n,onChange:s=>h(s.target.value),placeholder:"Rechercher une success story...",className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-purple-500/50 focus:bg-white/10 transition-all"})]}),e.jsxs("select",{value:g,onChange:s=>N(s.target.value),className:"px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-purple-500/50 appearance-none cursor-pointer",children:[e.jsx("option",{value:"recent",children:"Plus récents"}),e.jsx("option",{value:"popular",children:"Plus populaires"})]})]}),x.length>0&&e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Filtrer par mots-clés (",a.length," sélectionné",a.length>1?"s":"",")"]})]}),a.length>0&&e.jsxs("button",{onClick:j,className:"flex items-center gap-1 text-xs text-gray-400 hover:text-white transition-colors",children:[e.jsx(_,{className:"w-3 h-3"}),"Effacer les filtres"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(s=>{const t=a.includes(s),r=C[s]||0;return e.jsxs("button",{onClick:()=>S(s),className:`
                            inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-sm transition-all
                            ${t?"bg-purple-500/20 border-purple-500/50 text-purple-400":"bg-white/5 border-white/10 text-gray-400 hover:text-white hover:bg-white/10"}
                          `,children:[e.jsx("span",{className:"capitalize",children:s}),e.jsxs("span",{className:`text-xs ${t?"text-purple-400/70":"text-gray-500"}`,children:["(",r,")"]})]},s)})})]})]})})}),e.jsx("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:w?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(q,{className:"w-8 h-8 text-purple-400 animate-spin"})}):i.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 text-sm text-gray-400",children:[i.length," article",i.length>1?"s":""," trouvé",i.length>1?"s":""]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map((s,t)=>e.jsx(u.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},className:"group",children:e.jsx("a",{href:`/article/${s.slug}`,className:"block h-full",children:e.jsxs("div",{className:"relative bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl overflow-hidden hover:bg-white/10 hover:border-purple-500/30 transition-all duration-300 h-full flex flex-col",children:[s.mainImage&&e.jsxs("div",{className:"relative aspect-[16/10] overflow-hidden",children:[e.jsx("img",{src:s.mainImage,alt:s.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:"px-3 py-1 bg-purple-500/20 backdrop-blur-sm border border-purple-500/30 rounded-full text-xs font-medium text-purple-400",children:"Success Story"})})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3 line-clamp-2 group-hover:text-purple-400 transition-colors",children:s.title}),s.excerpt&&e.jsx("p",{className:"text-gray-400 text-sm line-clamp-3 mb-4",children:s.excerpt}),e.jsxs("div",{className:"mt-auto flex items-center justify-between text-xs text-gray-500",children:[s.author&&e.jsxs("div",{className:"flex items-center gap-2",children:[s.author.image&&e.jsx("img",{src:s.author.image,alt:s.author.name,className:"w-6 h-6 rounded-full"}),e.jsx("span",{children:s.author.name})]}),s.publishedAt&&e.jsx("span",{children:new Date(s.publishedAt).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:s.tags.slice(0,3).map(r=>e.jsxs("span",{className:`text-xs px-2 py-1 rounded-md transition-colors ${a.includes(r.toLowerCase())?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"bg-white/5 text-gray-400"}`,children:["#",r]},r))}),e.jsx("div",{className:"mt-4",children:e.jsxs("span",{className:"inline-flex items-center gap-2 text-purple-400 text-sm font-medium group-hover:gap-3 transition-all",children:["Découvrir le parcours",e.jsx(I,{className:"w-4 h-4"})]})})]})]})})},s._id))})]}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx(P,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:a.length>0||n?"Aucune success story ne correspond à vos critères":"Aucune success story trouvée"}),(a.length>0||n)&&e.jsx("button",{onClick:j,className:"mt-4 text-sm text-purple-400 hover:text-purple-300 transition-colors",children:"Effacer les filtres"})]})}),e.jsx(L,{})]})]})};export{H as SuccessStoriesPage,H as default};
