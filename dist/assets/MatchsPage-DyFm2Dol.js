import{j as e}from"./sanity-tkM5Czdy.js";import{r as c,L as U}from"./react-vendor-DFZZ7aeY.js";import{A as X,B as Z,C as ee,D as te,E as se}from"./index-DejFnw6e.js";import{$ as R,b as _,g as O,c as ae,f as ne,C as ie,A as re,m as le}from"./ui-BAupG38P.js";function d(s){return s.toISOString().split("T")[0]}function B(s){const n=new Date,a=new Date(n);a.setDate(a.getDate()-1);const g=new Date(n);return g.setDate(g.getDate()+1),d(s)===d(n)?"Aujourd'hui":d(s)===d(a)?"Hier":d(s)===d(g)?"Demain":s.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric"})}function oe(){const s=[];for(let n=7;n>=1;n--){const a=new Date;a.setDate(a.getDate()-n),s.push({date:a,label:B(a),dateStr:d(a),isPast:!0})}for(let n=0;n<7;n++){const a=new Date;a.setDate(a.getDate()+n),s.push({date:a,label:B(a),dateStr:d(a),isPast:!1})}return s}function ce(s){return new Date(s).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}const de=({minute:s})=>e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 bg-red-500/20 border border-red-500/50 rounded-full",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),e.jsx("span",{className:"text-red-400 text-xs font-bold",children:s?`${s}'`:"LIVE"})]}),H=()=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-gray-800/50 rounded-lg mb-3"}),[1,2,3].map(s=>e.jsx("div",{className:"h-20 bg-gray-800/30 rounded-xl mb-2"},s))]}),xe=({match:s})=>{const n=s.status==="IN_PLAY"||s.status==="PAUSED",a=s.status==="FINISHED";return e.jsx(U,{to:`/match/${s.id}`,className:`block p-4 rounded-xl border transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${n?"bg-red-500/5 border-red-500/30 hover:border-red-500/50":"bg-gray-900/50 border-gray-800 hover:border-pink-500/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("img",{src:s.homeTeam.crest,alt:"",className:"w-8 h-8 object-contain flex-shrink-0"}),e.jsx("span",{className:`font-medium truncate ${n?"text-white":"text-gray-200"}`,children:s.homeTeam.name})]}),e.jsx("div",{className:"flex flex-col items-center mx-4 min-w-[80px]",children:n||a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"text-white",children:s.score.fullTime.home??0}),e.jsx("span",{className:"text-gray-600",children:"-"}),e.jsx("span",{className:"text-white",children:s.score.fullTime.away??0})]}),n&&e.jsx(de,{minute:s.minute}),a&&e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Terminé"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg font-bold text-pink-400",children:ce(s.utcDate)}),s.venue&&e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[100px]",children:s.venue})]})}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 justify-end",children:[e.jsx("span",{className:`font-medium truncate text-right ${n?"text-white":"text-gray-200"}`,children:s.awayTeam.name}),e.jsx("img",{src:s.awayTeam.crest,alt:"",className:"w-8 h-8 object-contain flex-shrink-0"})]})]})})},L=({competition:s,matches:n,isCollapsed:a,onToggle:g})=>{const x=se[s.id],b=n.filter(m=>m.status==="IN_PLAY"||m.status==="PAUSED").length;return e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:g,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-800/50 rounded-t-xl border border-gray-700/50 hover:bg-gray-800/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.emblem?e.jsx("img",{src:s.emblem,alt:"",className:"w-6 h-6 object-contain"}):e.jsx("span",{className:"text-xl",children:(x==null?void 0:x.flag)||"⚽"}),e.jsx("span",{className:"text-white font-semibold",children:s.name}),b>0&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-500/20 text-red-400 text-xs font-bold rounded-full",children:[b," live"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:n.length}),e.jsx(ie,{className:`w-5 h-5 text-gray-400 transition-transform ${a?"":"rotate-180"}`})]})]}),e.jsx(re,{children:!a&&e.jsx(le.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"space-y-2 p-3 bg-gray-900/30 rounded-b-xl border-x border-b border-gray-700/50",children:n.map(m=>e.jsx(xe,{match:m},m.id))})})})]})};function pe(){var F;const s=X(),n=s.map(t=>t.id),[a,g]=c.useState([]),[x,b]=c.useState([]),[m,w]=c.useState(!0),[k,$]=c.useState(null),[j,V]=c.useState(d(new Date)),[u,Y]=c.useState(n),[D,W]=c.useState(new Set),[l,f]=c.useState("all"),C=c.useRef(null),S=oe(),v=S.findIndex(t=>t.dateStr===d(new Date)),y=c.useCallback(async()=>{try{$(null);const i=(await Z()).filter(o=>{var h;return u.includes((h=o.competition)==null?void 0:h.id)});b(i);const r=await ee(j,u);g(r),w(!1)}catch(t){console.error("Erreur chargement matchs:",t),$("Impossible de charger les matchs"),w(!1)}},[j,u]);c.useEffect(()=>(w(!0),y(),C.current=window.setInterval(y,3e4),()=>{C.current&&clearInterval(C.current)}),[y]),c.useEffect(()=>{const t=document.getElementById("days-nav");if(t&&v>=0){const i=t.querySelectorAll("button");if(i[v]){const r=i[v],o=r.offsetLeft-t.clientWidth/2+r.clientWidth/2;t.scrollTo({left:o,behavior:"smooth"})}}},[v]);const q=()=>{Y(n)},M=t=>{W(i=>{const r=new Set(i);return r.has(t)?r.delete(t):r.add(t),r})},I=t=>{const i={};t.forEach(o=>{var p;const h=(p=o.competition)==null?void 0:p.id;h&&(i[h]||(i[h]={competition:o.competition,matches:[]}),i[h].matches.push(o))});const r=te();return Object.entries(i).sort(([o],[h])=>{const p=r.indexOf(Number(o)),E=r.indexOf(Number(h));return p===-1&&E===-1?0:p===-1?1:E===-1?-1:p-E}).map(([,o])=>o)},z=()=>l==="live"?x:l==="upcoming"?a.filter(t=>t.status==="SCHEDULED"||t.status==="TIMED"):a,A=x.length,G=a.length,J=a.filter(t=>t.status==="SCHEDULED"||t.status==="TIMED").length,K=a.filter(t=>t.status==="FINISHED").length,N=((F=S.find(t=>t.dateStr===j))==null?void 0:F.isPast)||!1,Q=z(),T=I(Q),P=I(x);return e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(236,72,153,0.1),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_right,rgba(59,130,246,0.1),transparent_50%)]"})]}),e.jsx("header",{className:"relative pt-24 pb-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Match Center"}),e.jsx("p",{className:"text-gray-400",children:"Tous les matchs en temps réel"})]}),e.jsxs("div",{className:"flex justify-center gap-3 mb-6 flex-wrap",children:[!N&&e.jsxs("button",{onClick:()=>f(l==="live"?"all":"live"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${l==="live"?"bg-red-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(R,{className:"w-4 h-4"}),e.jsxs("span",{children:[A," Live"]})]}),e.jsxs("button",{onClick:()=>f("all"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${l==="all"?N?"bg-violet-500 text-white":"bg-pink-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(_,{className:"w-4 h-4"}),e.jsxs("span",{children:[G," ",N?"Résultats":"Matchs"]})]}),N?e.jsxs("button",{onClick:()=>f("all"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${l==="all"?"bg-gray-600 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(O,{className:"w-4 h-4"}),e.jsxs("span",{children:[K," Terminés"]})]}):e.jsxs("button",{onClick:()=>f(l==="upcoming"?"all":"upcoming"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${l==="upcoming"?"bg-blue-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsxs("span",{children:[J," À venir"]})]})]})]})}),e.jsx("div",{className:"sticky top-20 z-40 bg-black/90 backdrop-blur-sm border-y border-gray-800",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4",children:e.jsxs("div",{className:"flex gap-1 py-3 overflow-x-auto scrollbar-hide",id:"days-nav",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center pr-3 mr-2 border-r border-gray-700",children:e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Résultats"})}),S.map((t,i)=>{const r=t.dateStr===d(new Date),o=j===t.dateStr;return e.jsx("button",{onClick:()=>{V(t.dateStr),f("all")},className:`flex-shrink-0 px-4 py-2 rounded-lg font-medium text-sm transition-all ${o?t.isPast?"bg-gradient-to-r from-violet-500 to-violet-600 text-white":"bg-gradient-to-r from-pink-500 to-pink-600 text-white":r?"text-pink-400 bg-pink-500/10 hover:bg-pink-500/20":t.isPast?"text-gray-500 hover:text-gray-300 hover:bg-gray-800/50":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:t.label},t.dateStr)}),e.jsx("div",{className:"flex-shrink-0 flex items-center pl-3 ml-2 border-l border-gray-700",children:e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"À venir"})})]})})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-6 pb-2",children:e.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-hide pb-2",children:[e.jsx("button",{onClick:q,className:`flex-shrink-0 px-4 py-2 rounded-2xl text-xs font-bold uppercase tracking-wider transition-all duration-300 ${u.length===n.length?"bg-gradient-to-r from-pink-500 to-violet-500 text-white shadow-lg shadow-pink-500/25":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:"All"}),e.jsx("div",{className:"w-px h-6 bg-gradient-to-b from-transparent via-gray-700 to-transparent"}),s.map(t=>{const i=u.length===1&&u.includes(t.id);return e.jsxs(U,{to:`/classements/matchday/${t.id}`,className:`group relative flex-shrink-0 px-3 py-2 rounded-2xl transition-all duration-300 ${i?"bg-gradient-to-r from-white/15 to-white/5 shadow-lg":"hover:bg-white/5"}`,title:`Voir les journées - ${t.name}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-base transition-transform duration-300 ${i?"scale-110":"group-hover:scale-105"}`,children:t.flag}),e.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide transition-all duration-300 ${i?"text-white":"text-gray-500 group-hover:text-gray-300"}`,children:t.shortName})]}),e.jsx("span",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-0.5 bg-gradient-to-r from-pink-500 to-violet-500 rounded-full transition-all duration-300 ${i?"w-6 opacity-100":"w-0 opacity-0"}`})]},t.id)})]})}),e.jsxs("main",{className:"relative max-w-5xl mx-auto px-4 py-8",children:[m&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{}),e.jsx(H,{})]}),k&&!m&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(O,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:k}),e.jsxs("button",{onClick:y,className:"mt-4 px-6 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors inline-flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Réessayer"]})]}),!m&&!k&&e.jsxs(e.Fragment,{children:[l!=="live"&&x.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Matchs en direct"})]}),P.map(t=>e.jsx(L,{competition:t.competition,matches:t.matches,isCollapsed:D.has(t.competition.id),onToggle:()=>M(t.competition.id)},`live-${t.competition.id}`))]}),l==="live"&&x.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(R,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucun match en direct"}),e.jsx("p",{className:"text-gray-500",children:"Il n'y a pas de match en cours actuellement"})]}),l!=="live"&&T.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(_,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucun match"}),e.jsx("p",{className:"text-gray-500",children:"Pas de match prévu pour cette date dans les compétitions sélectionnées"})]}),l==="live"&&x.length>0&&e.jsx(e.Fragment,{children:P.map(t=>e.jsx(L,{competition:t.competition,matches:t.matches,isCollapsed:D.has(t.competition.id),onToggle:()=>M(t.competition.id)},t.competition.id))}),l!=="live"&&T.length>0&&e.jsxs(e.Fragment,{children:[l==="upcoming"&&e.jsx("h2",{className:"text-lg font-semibold text-gray-400 mb-4",children:"Matchs à venir"}),T.map(t=>{const i=l==="all"?t.matches.filter(r=>r.status!=="IN_PLAY"&&r.status!=="PAUSED"):t.matches;return i.length===0?null:e.jsx(L,{competition:t.competition,matches:i,isCollapsed:D.has(t.competition.id),onToggle:()=>M(t.competition.id)},t.competition.id)})]})]}),A>0&&e.jsxs("div",{className:"fixed bottom-4 right-4 px-3 py-2 bg-gray-900/90 backdrop-blur-sm rounded-full border border-gray-700 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Auto-refresh actif"]})]})]})}export{pe as default};
