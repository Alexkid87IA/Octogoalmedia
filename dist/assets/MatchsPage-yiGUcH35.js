import{j as e}from"./sanity-tkM5Czdy.js";import{r as o,L as q}from"./react-vendor-DFZZ7aeY.js";import{A as se,B as ae,C as ie,D as ne,E as re}from"./index-25U1HBy9.js";import{g as le,f as oe,a as z}from"./oddsService-CXOxpCUJ.js";import{m as O,$ as B,b as U,g as W,c as ce,f as de,C as xe,A as me}from"./ui-kcrkP2Yo.js";const he=({homeTeam:s,awayTeam:i,competitionId:a,matchStatus:x="SCHEDULED",variant:d="inline"})=>{const[f,m]=o.useState(null),[y,j]=o.useState(!0);if(o.useEffect(()=>{if(x==="FINISHED"){j(!1);return}(async()=>{try{const p=await oe(s,i,a);m(p)}catch(p){console.error("[OddsBadge] Error:",p)}finally{j(!1)}})()},[s,i,a,x]),x==="FINISHED"||y)return null;const u=f==null?void 0:f.odds.winamax;if(!u)return null;const h=le(f);return d==="inline"?e.jsxs(O.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-1 text-[10px]",title:"Cotes Winamax",children:[e.jsx("div",{className:"w-3.5 h-3.5 rounded bg-gradient-to-br from-red-600 via-orange-500 to-yellow-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-black text-[7px]",children:"W"})}),e.jsx(L,{value:u.home,isFavorite:h==="home"}),e.jsx(L,{value:u.draw,isFavorite:h==="draw"}),e.jsx(L,{value:u.away,isFavorite:h==="away"})]}):e.jsxs(O.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"flex items-center justify-between bg-white/5 rounded-lg px-3 py-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-red-600 via-orange-500 to-yellow-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-[8px]",children:"W"})}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"Winamax"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{label:"1",value:u.home,isFavorite:h==="home"}),e.jsx(F,{label:"N",value:u.draw,isFavorite:h==="draw"}),e.jsx(F,{label:"2",value:u.away,isFavorite:h==="away"})]})]})},L=({value:s,isFavorite:i=!1})=>e.jsx("span",{className:`
      px-1.5 py-0.5 rounded font-medium
      ${i?"bg-green-500/20 text-green-400":"bg-white/10 text-gray-300"}
    `,children:z(s)}),F=({label:s,value:i,isFavorite:a=!1})=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[9px] text-gray-500",children:s}),e.jsx("span",{className:`
        text-xs font-bold
        ${a?"text-green-400":"text-white"}
      `,children:z(i)})]});function g(s){return s.toISOString().split("T")[0]}function V(s){const i=new Date,a=new Date(i);a.setDate(a.getDate()-1);const x=new Date(i);return x.setDate(x.getDate()+1),g(s)===g(i)?"Aujourd'hui":g(s)===g(a)?"Hier":g(s)===g(x)?"Demain":s.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric"})}function ge(){const s=[];for(let i=7;i>=1;i--){const a=new Date;a.setDate(a.getDate()-i),s.push({date:a,label:V(a),dateStr:g(a),isPast:!0})}for(let i=0;i<7;i++){const a=new Date;a.setDate(a.getDate()+i),s.push({date:a,label:V(a),dateStr:g(a),isPast:!1})}return s}function ue(s){return new Date(s).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}const pe=({minute:s})=>e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 bg-red-500/20 border border-red-500/50 rounded-full",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),e.jsx("span",{className:"text-red-400 text-xs font-bold",children:s?`${s}'`:"LIVE"})]}),Y=()=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-gray-800/50 rounded-lg mb-3"}),[1,2,3].map(s=>e.jsx("div",{className:"h-20 bg-gray-800/30 rounded-xl mb-2"},s))]}),fe=({match:s})=>{const i=s.status==="IN_PLAY"||s.status==="PAUSED",a=s.status==="FINISHED";return e.jsxs(q,{to:`/match/${s.id}`,className:`block p-4 rounded-xl border transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${i?"bg-red-500/5 border-red-500/30 hover:border-red-500/50":"bg-gray-900/50 border-gray-800 hover:border-pink-500/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("img",{src:s.homeTeam.crest,alt:"",className:"w-8 h-8 object-contain flex-shrink-0"}),e.jsx("span",{className:`font-medium truncate ${i?"text-white":"text-gray-200"}`,children:s.homeTeam.name})]}),e.jsx("div",{className:"flex flex-col items-center mx-4 min-w-[80px]",children:i||a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"text-white",children:s.score.fullTime.home??0}),e.jsx("span",{className:"text-gray-600",children:"-"}),e.jsx("span",{className:"text-white",children:s.score.fullTime.away??0})]}),i&&e.jsx(pe,{minute:s.minute}),a&&e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Terminé"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg font-bold text-pink-400",children:ue(s.utcDate)}),s.venue&&e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[100px]",children:s.venue})]})}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 justify-end",children:[e.jsx("span",{className:`font-medium truncate text-right ${i?"text-white":"text-gray-200"}`,children:s.awayTeam.name}),e.jsx("img",{src:s.awayTeam.crest,alt:"",className:"w-8 h-8 object-contain flex-shrink-0"})]})]}),!a&&e.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:e.jsx(he,{homeTeam:s.homeTeam.name,awayTeam:s.awayTeam.name,competitionId:s.competition.id,matchStatus:s.status,variant:"row"})})]})},$=({competition:s,matches:i,isCollapsed:a,onToggle:x})=>{const d=re[s.id],f=i.filter(m=>m.status==="IN_PLAY"||m.status==="PAUSED").length;return e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:x,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-800/50 rounded-t-xl border border-gray-700/50 hover:bg-gray-800/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.emblem?e.jsx("img",{src:s.emblem,alt:"",className:"w-6 h-6 object-contain"}):e.jsx("span",{className:"text-xl",children:(d==null?void 0:d.flag)||"⚽"}),e.jsx("span",{className:"text-white font-semibold",children:s.name}),f>0&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-500/20 text-red-400 text-xs font-bold rounded-full",children:[f," live"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:i.length}),e.jsx(xe,{className:`w-5 h-5 text-gray-400 transition-transform ${a?"":"rotate-180"}`})]})]}),e.jsx(me,{children:!a&&e.jsx(O.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"space-y-2 p-3 bg-gray-900/30 rounded-b-xl border-x border-b border-gray-700/50",children:i.map(m=>e.jsx(fe,{match:m},m.id))})})})]})};function we(){var H;const s=se(),i=s.map(t=>t.id),[a,x]=o.useState([]),[d,f]=o.useState([]),[m,y]=o.useState(!0),[j,u]=o.useState(null),[h,A]=o.useState(g(new Date)),[p,G]=o.useState(i),[S,J]=o.useState(new Set),[l,N]=o.useState("all"),C=o.useRef(null),E=ge(),w=E.findIndex(t=>t.dateStr===g(new Date)),D=o.useCallback(async()=>{try{u(null);const n=(await ae()).filter(c=>{var b;return p.includes((b=c.competition)==null?void 0:b.id)});f(n);const r=await ie(h,p);x(r),y(!1)}catch(t){console.error("Erreur chargement matchs:",t),u("Impossible de charger les matchs"),y(!1)}},[h,p]);o.useEffect(()=>(y(!0),D(),C.current=window.setInterval(D,3e4),()=>{C.current&&clearInterval(C.current)}),[D]),o.useEffect(()=>{const t=document.getElementById("days-nav");if(t&&w>=0){const n=t.querySelectorAll("button");if(n[w]){const r=n[w],c=r.offsetLeft-t.clientWidth/2+r.clientWidth/2;t.scrollTo({left:c,behavior:"smooth"})}}},[w]);const K=()=>{G(i)},M=t=>{J(n=>{const r=new Set(n);return r.has(t)?r.delete(t):r.add(t),r})},P=t=>{const n={};t.forEach(c=>{var v;const b=(v=c.competition)==null?void 0:v.id;b&&(n[b]||(n[b]={competition:c.competition,matches:[]}),n[b].matches.push(c))});const r=ne();return Object.entries(n).sort(([c],[b])=>{const v=r.indexOf(Number(c)),I=r.indexOf(Number(b));return v===-1&&I===-1?0:v===-1?1:I===-1?-1:v-I}).map(([,c])=>c)},Q=()=>l==="live"?d:l==="upcoming"?a.filter(t=>t.status==="SCHEDULED"||t.status==="TIMED"):a,R=d.length,X=a.length,Z=a.filter(t=>t.status==="SCHEDULED"||t.status==="TIMED").length,ee=a.filter(t=>t.status==="FINISHED").length,k=((H=E.find(t=>t.dateStr===h))==null?void 0:H.isPast)||!1,te=Q(),T=P(te),_=P(d);return e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(236,72,153,0.1),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_right,rgba(59,130,246,0.1),transparent_50%)]"})]}),e.jsx("header",{className:"relative pt-24 pb-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Match Center"}),e.jsx("p",{className:"text-gray-400",children:"Tous les matchs en temps réel"})]}),e.jsxs("div",{className:"flex justify-center gap-3 mb-6 flex-wrap",children:[!k&&e.jsxs("button",{onClick:()=>N(l==="live"?"all":"live"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${l==="live"?"bg-red-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(B,{className:"w-4 h-4"}),e.jsxs("span",{children:[R," Live"]})]}),e.jsxs("button",{onClick:()=>N("all"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${l==="all"?k?"bg-violet-500 text-white":"bg-pink-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(U,{className:"w-4 h-4"}),e.jsxs("span",{children:[X," ",k?"Résultats":"Matchs"]})]}),k?e.jsxs("button",{onClick:()=>N("all"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${l==="all"?"bg-gray-600 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(W,{className:"w-4 h-4"}),e.jsxs("span",{children:[ee," Terminés"]})]}):e.jsxs("button",{onClick:()=>N(l==="upcoming"?"all":"upcoming"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${l==="upcoming"?"bg-blue-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsxs("span",{children:[Z," À venir"]})]})]})]})}),e.jsx("div",{className:"sticky top-20 z-40 bg-black/90 backdrop-blur-sm border-y border-gray-800",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4",children:e.jsxs("div",{className:"flex gap-1 py-3 overflow-x-auto scrollbar-hide",id:"days-nav",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center pr-3 mr-2 border-r border-gray-700",children:e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Résultats"})}),E.map((t,n)=>{const r=t.dateStr===g(new Date),c=h===t.dateStr;return e.jsx("button",{onClick:()=>{A(t.dateStr),N("all")},className:`flex-shrink-0 px-4 py-2 rounded-lg font-medium text-sm transition-all ${c?t.isPast?"bg-gradient-to-r from-violet-500 to-violet-600 text-white":"bg-gradient-to-r from-pink-500 to-pink-600 text-white":r?"text-pink-400 bg-pink-500/10 hover:bg-pink-500/20":t.isPast?"text-gray-500 hover:text-gray-300 hover:bg-gray-800/50":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:t.label},t.dateStr)}),e.jsx("div",{className:"flex-shrink-0 flex items-center pl-3 ml-2 border-l border-gray-700",children:e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"À venir"})})]})})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-6 pb-2",children:e.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-hide pb-2",children:[e.jsx("button",{onClick:K,className:`flex-shrink-0 px-4 py-2 rounded-2xl text-xs font-bold uppercase tracking-wider transition-all duration-300 ${p.length===i.length?"bg-gradient-to-r from-pink-500 to-violet-500 text-white shadow-lg shadow-pink-500/25":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:"All"}),e.jsx("div",{className:"w-px h-6 bg-gradient-to-b from-transparent via-gray-700 to-transparent"}),s.map(t=>{const n=p.length===1&&p.includes(t.id);return e.jsxs(q,{to:`/classements/matchday/${t.id}`,className:`group relative flex-shrink-0 px-3 py-2 rounded-2xl transition-all duration-300 ${n?"bg-gradient-to-r from-white/15 to-white/5 shadow-lg":"hover:bg-white/5"}`,title:`Voir les journées - ${t.name}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-base transition-transform duration-300 ${n?"scale-110":"group-hover:scale-105"}`,children:t.flag}),e.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide transition-all duration-300 ${n?"text-white":"text-gray-500 group-hover:text-gray-300"}`,children:t.shortName})]}),e.jsx("span",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-0.5 bg-gradient-to-r from-pink-500 to-violet-500 rounded-full transition-all duration-300 ${n?"w-6 opacity-100":"w-0 opacity-0"}`})]},t.id)})]})}),e.jsxs("main",{className:"relative max-w-5xl mx-auto px-4 py-8",children:[m&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Y,{}),e.jsx(Y,{})]}),j&&!m&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(W,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:j}),e.jsxs("button",{onClick:D,className:"mt-4 px-6 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors inline-flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"Réessayer"]})]}),!m&&!j&&e.jsxs(e.Fragment,{children:[l!=="live"&&d.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Matchs en direct"})]}),_.map(t=>e.jsx($,{competition:t.competition,matches:t.matches,isCollapsed:S.has(t.competition.id),onToggle:()=>M(t.competition.id)},`live-${t.competition.id}`))]}),l==="live"&&d.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(B,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucun match en direct"}),e.jsx("p",{className:"text-gray-500",children:"Il n'y a pas de match en cours actuellement"})]}),l!=="live"&&T.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(U,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucun match"}),e.jsx("p",{className:"text-gray-500",children:"Pas de match prévu pour cette date dans les compétitions sélectionnées"})]}),l==="live"&&d.length>0&&e.jsx(e.Fragment,{children:_.map(t=>e.jsx($,{competition:t.competition,matches:t.matches,isCollapsed:S.has(t.competition.id),onToggle:()=>M(t.competition.id)},t.competition.id))}),l!=="live"&&T.length>0&&e.jsxs(e.Fragment,{children:[l==="upcoming"&&e.jsx("h2",{className:"text-lg font-semibold text-gray-400 mb-4",children:"Matchs à venir"}),T.map(t=>{const n=l==="all"?t.matches.filter(r=>r.status!=="IN_PLAY"&&r.status!=="PAUSED"):t.matches;return n.length===0?null:e.jsx($,{competition:t.competition,matches:n,isCollapsed:S.has(t.competition.id),onToggle:()=>M(t.competition.id)},t.competition.id)})]})]}),R>0&&e.jsxs("div",{className:"fixed bottom-4 right-4 px-3 py-2 bg-gray-900/90 backdrop-blur-sm rounded-full border border-gray-700 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Auto-refresh actif"]})]})]})}export{we as default};
