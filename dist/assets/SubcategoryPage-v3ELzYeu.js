import{j as e}from"./sanity-tkM5Czdy.js";import{L as h,f as q,r as i}from"./react-vendor-DFZZ7aeY.js";import{S as F}from"./SEO-9929qYz7.js";import{F as H}from"./Footer-DRo0zem4.js";import{L as z,b as O,d as J,e as K}from"./sanityAPI-BY64AXrt.js";import{E as U}from"./ErrorMessage-Dcd9lx82.js";import{E as Q}from"./ErrorBoundary-90T7wqnZ.js";import{S as $}from"./SafeImage-CXeaWFCd.js";import{m as o,r as L,S as W,E as X,H as Y,I as Z,A as ee,c as E,J as P,d as T,K as te,C as se}from"./ui-BAupG38P.js";import"./index-DejFnw6e.js";const B=({subcategories:r,variant:c="default",maxVisible:u=2,className:b=""})=>{if(!r||r.length===0)return null;const x=r.slice(0,u),m=r.length-u,f=(()=>{switch(c){case"compact":return"px-2 py-1 text-[10px]";case"overlay":return"px-2.5 py-1 text-[11px]";default:return"px-3 py-1.5 text-xs"}})();return e.jsxs("div",{className:`flex flex-wrap items-center gap-1.5 ${b}`,children:[x.map((a,y)=>{var j,g;return e.jsx(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:y*.05},children:e.jsx(h,{to:`/rubrique/${((g=(j=a.parentCategory)==null?void 0:j.slug)==null?void 0:g.current)||"story"}/${a.slug.current}`,onClick:v=>v.stopPropagation(),className:"group inline-block",children:e.jsx("div",{className:`
                ${f}
                bg-black/70 backdrop-blur-sm 
                rounded-full border border-white/20 
                font-medium text-white/90 
                transition-all duration-300
                group-hover:bg-black/90 
                group-hover:border-white/30 
                group-hover:text-white
                group-hover:scale-105
              `,children:a.title})})},a._id)}),m>0&&e.jsxs(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:x.length*.05},className:`
            ${f}
            bg-black/50 backdrop-blur-sm 
            rounded-full border border-white/10 
            font-medium text-white/60
          `,children:["+",m]})]})},I={story:{gradient:"from-amber-400 to-orange-500",bgGradient:"from-amber-900/20 to-orange-900/20"},business:{gradient:"from-blue-400 to-cyan-500",bgGradient:"from-blue-900/20 to-cyan-900/20"},mental:{gradient:"from-purple-400 to-violet-500",bgGradient:"from-purple-900/20 to-violet-900/20"},society:{gradient:"from-emerald-400 to-teal-500",bgGradient:"from-emerald-900/20 to-teal-900/20"}};function he(){const{categorySlug:r,subcategorySlug:c}=q(),[u,b]=i.useState([]),[x,m]=i.useState([]),[s,f]=i.useState(null),[a,y]=i.useState(null),[j,g]=i.useState(!0),[v,N]=i.useState(null),[S,G]=i.useState(""),[D,M]=i.useState("recent"),[p,C]=i.useState("grid"),[R,_]=i.useState(1),A=9,w=I[r]||I.story;i.useEffect(()=>{(async()=>{try{if(g(!0),N(null),!c||!r){N("Sous-catégorie non spécifiée");return}const n=await O(r);n&&y(n);const l=await J(c);l&&f(l);const d=await K(c);d&&d.length>0?(b(d),m(d.slice(0,A))):(b([]),m([]))}catch(n){N("Une erreur est survenue lors du chargement des articles."),console.error("Error fetching articles:",n)}finally{g(!1)}})()},[r,c]);const k=u.filter(t=>{var l;return t.title.toLowerCase().includes(S.toLowerCase())||((l=t.excerpt)==null?void 0:l.toLowerCase().includes(S.toLowerCase()))}),V=()=>{const t=R+1,n=0,l=t*A;m(k.slice(n,l)),_(t)};return j?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx(z,{})}):v?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx(U,{message:v})}):e.jsxs(Q,{children:[e.jsx(F,{title:`${(s==null?void 0:s.title)||"Articles"} - ${(a==null?void 0:a.title)||"Catégorie"} | Octogoal Media`,description:(s==null?void 0:s.description)||"Découvrez nos articles"}),e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsxs("section",{className:"relative overflow-hidden pt-32 pb-16",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${w.bgGradient}`}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(255,255,255,0.05),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 backdrop-blur-sm"})]}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm mb-8",children:[e.jsx(h,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Home"}),e.jsx(L,{className:"w-4 h-4 text-gray-600"}),e.jsx(h,{to:`/rubrique/${r}`,className:"text-gray-400 hover:text-white transition-colors",children:(a==null?void 0:a.title)||r}),e.jsx(L,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:`text-transparent bg-clip-text bg-gradient-to-r ${w.gradient}`,children:(s==null?void 0:s.title)||c})]}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:e.jsx("span",{className:`text-transparent bg-clip-text bg-gradient-to-r ${w.gradient}`,children:(s==null?void 0:s.title)||"Articles"})}),(s==null?void 0:s.description)&&e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mb-8",children:s.description}),e.jsx("div",{className:"flex items-center gap-6 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsxs("span",{className:"text-gray-400",children:[k.length," articles"]})]})})]})]})]}),e.jsx("section",{className:"sticky top-20 z-30 bg-black/80 backdrop-blur-xl border-y border-white/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(W,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:S,onChange:t=>G(t.target.value),placeholder:"Rechercher un article...",className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-white/20 focus:bg-white/10 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:D,onChange:t=>M(t.target.value),className:"px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-white/20 appearance-none cursor-pointer",children:[e.jsx("option",{value:"recent",children:"Plus récents"}),e.jsx("option",{value:"popular",children:"Plus populaires"}),e.jsx("option",{value:"trending",children:"Tendances"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/5 border border-white/10 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>C("grid"),className:`p-2 rounded-lg transition-all ${p==="grid"?"bg-white/10 text-white":"text-gray-400 hover:text-white"}`,children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>C("list"),className:`p-2 rounded-lg transition-all ${p==="list"?"bg-white/10 text-white":"text-gray-400 hover:text-white"}`,children:e.jsx(Z,{className:"w-5 h-5"})})]})]})})}),e.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsx(ee,{mode:"wait",children:x.length>0?e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:p==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8":"space-y-6",children:x.map((t,n)=>{var l,d;return e.jsx(o.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},children:p==="grid"?e.jsx(h,{to:`/article/${(l=t.slug)==null?void 0:l.current}`,className:"group block",children:e.jsxs("div",{className:"relative bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl overflow-hidden hover:bg-white/10 hover:border-white/20 transition-all duration-300",children:[e.jsxs("div",{className:"relative aspect-[16/10] overflow-hidden bg-gradient-to-br from-gray-900 to-black",children:[e.jsx($,{source:t.mainImage,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",fallbackText:t.title}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),t.subcategories&&t.subcategories.length>0&&e.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:e.jsx(B,{subcategories:t.subcategories,variant:"compact",maxVisible:2})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2 group-hover:text-pink-400 transition-colors",children:t.title}),t.excerpt&&e.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:t.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),t.readingTime||"5 min"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"}),"2.3k"]})]}),e.jsx(T,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]})}):e.jsx(h,{to:`/article/${(d=t.slug)==null?void 0:d.current}`,className:"group block",children:e.jsx("div",{className:"relative bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl overflow-hidden hover:bg-white/10 hover:border-white/20 transition-all duration-300 p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"flex-shrink-0 w-48 h-32 rounded-xl overflow-hidden bg-gradient-to-br from-gray-900 to-black",children:e.jsx($,{source:t.mainImage,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",fallbackText:t.title})}),e.jsxs("div",{className:"flex-1",children:[t.subcategories&&t.subcategories.length>0&&e.jsx(B,{subcategories:t.subcategories,variant:"compact",maxVisible:3,className:"mb-2"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2 group-hover:text-pink-400 transition-colors",children:t.title}),t.excerpt&&e.jsx("p",{className:"text-gray-400 line-clamp-2 mb-4",children:t.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),t.readingTime||"5 min"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"}),"2.3k"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("span",{children:"Lire l'article"}),e.jsx(T,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]})]})})})},t._id)})},p):e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[e.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Aucun article trouvé dans cette sous-catégorie."}),e.jsxs(h,{to:`/rubrique/${r}`,className:"inline-flex items-center gap-2 text-white hover:text-blue-400 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsxs("span",{children:["Retour à ",a==null?void 0:a.title]})]})]})}),x.length<k.length&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center mt-12",children:e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:V,className:`inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r ${w.gradient} text-white font-bold rounded-2xl shadow-lg hover:shadow-2xl transition-all`,children:[e.jsx("span",{children:"Charger plus d'articles"}),e.jsx(se,{className:"w-5 h-5"})]})})]}),e.jsx(H,{})]})]})}export{he as SubcategoryPage};
