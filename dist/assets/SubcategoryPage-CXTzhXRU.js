import{j as e}from"./sanity-Dli2Tcak.js";import{L as m,f as z,r as i}from"./react-vendor-BZT10b4B.js";import{S as F}from"./SEO-C1ysZtSl.js";import{F as H}from"./Footer-DCqNEjgN.js";import{L as O}from"./LoadingSpinner-eIc9uk8W.js";import{E as G}from"./ErrorMessage-Cv1JOIce.js";import{E as U}from"./ErrorBoundary-CGMvKTny.js";import{S as P}from"./SafeImage-a7uIdfak.js";import{m as n,c as L,w as J,S as $,y as K,z as Q,D as W,A as X,x as E,E as _,b as T,I as Y,C as Z}from"./ui-CXtmN_I9.js";import{d as ee,e as te,f as se}from"./sanityAPI-DTS41rFR.js";import"./index-B832RcJ2.js";const B=({subcategories:r,variant:c="default",maxVisible:u=2,className:b=""})=>{if(!r||r.length===0)return null;const x=r.slice(0,u),p=r.length-u,f=(()=>{switch(c){case"compact":return"px-2 py-1 text-[10px]";case"overlay":return"px-2.5 py-1 text-[11px]";default:return"px-3 py-1.5 text-xs"}})();return e.jsxs("div",{className:`flex flex-wrap items-center gap-1.5 ${b}`,children:[x.map((a,y)=>{var v,h;return e.jsx(n.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:y*.05},children:e.jsx(m,{to:`/rubrique/${((h=(v=a.parentCategory)==null?void 0:v.slug)==null?void 0:h.current)||"story"}/${a.slug.current}`,onClick:j=>j.stopPropagation(),className:"group inline-block",children:e.jsx("div",{className:`
                ${f}
                bg-black/70 backdrop-blur-sm 
                rounded-full border border-white/20 
                font-medium text-white/90 
                transition-all duration-300
                group-hover:bg-black/90 
                group-hover:border-white/30 
                group-hover:text-white
                group-hover:scale-105
              `,children:a.title})})},a._id)}),p>0&&e.jsxs(n.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:x.length*.05},className:`
            ${f}
            bg-black/50 backdrop-blur-sm 
            rounded-full border border-white/10 
            font-medium text-white/60
          `,children:["+",p]})]})},S="polygon(15% 0%, 85% 0%, 100% 15%, 100% 85%, 85% 100%, 15% 100%, 0% 85%, 0% 15%)";function he(){const{categorySlug:r,subcategorySlug:c}=z(),[u,b]=i.useState([]),[x,p]=i.useState([]),[s,f]=i.useState(null),[a,y]=i.useState(null),[v,h]=i.useState(!0),[j,N]=i.useState(null),[w,I]=i.useState(""),[D,R]=i.useState("recent"),[g,C]=i.useState("grid"),[M,q]=i.useState(1),A=9;i.useEffect(()=>{(async()=>{try{if(h(!0),N(null),!c||!r){N("Sous-catégorie non spécifiée");return}const o=await ee(r);o&&y(o);const l=await te(c);l&&f(l);const d=await se(c);d&&d.length>0?(b(d),p(d.slice(0,A))):(b([]),p([]))}catch(o){N("Une erreur est survenue lors du chargement des articles."),console.error("Error fetching articles:",o)}finally{h(!1)}})()},[r,c]);const k=u.filter(t=>{var l;return t.title.toLowerCase().includes(w.toLowerCase())||((l=t.excerpt)==null?void 0:l.toLowerCase().includes(w.toLowerCase()))}),V=()=>{const t=M+1,o=0,l=t*A;p(k.slice(o,l)),q(t)};return v?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx(O,{})}):j?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx(G,{message:j})}):e.jsxs(U,{children:[e.jsx(F,{title:`${(s==null?void 0:s.title)||"Articles"} - ${(a==null?void 0:a.title)||"Catégorie"} | Octogoal Media`,description:(s==null?void 0:s.description)||"Découvrez nos articles"}),e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsxs("section",{className:"relative overflow-hidden pt-32 pb-16",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-900/30 via-purple-900/20 to-blue-900/30"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(236,72,153,0.15),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_right,rgba(59,130,246,0.15),transparent_50%)]"}),e.jsx("div",{className:"absolute -top-20 -right-20 w-80 h-80 bg-gradient-to-br from-pink-500/10 to-blue-500/10 blur-3xl",style:{clipPath:S}}),e.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-gradient-to-br from-blue-500/10 to-pink-500/10 blur-3xl",style:{clipPath:S}})]}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm mb-8",children:[e.jsx(m,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Home"}),e.jsx(L,{className:"w-4 h-4 text-gray-600"}),e.jsx(m,{to:`/rubrique/${r}`,className:"text-gray-400 hover:text-white transition-colors",children:(a==null?void 0:a.title)||r}),e.jsx(L,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-blue-500",children:(s==null?void 0:s.title)||c})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-pink-500/20 to-blue-500/20 border border-pink-500/30 mb-6",children:[e.jsx(J,{className:"w-4 h-4 text-pink-400"}),e.jsx("span",{className:"text-sm text-white/80",children:(a==null?void 0:a.title)||"Rubrique"})]}),e.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-black mb-4",children:e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500",children:(s==null?void 0:s.title)||"Articles"})}),(s==null?void 0:s.description)&&e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mb-8",children:s.description}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-pink-500/10 to-blue-500/10 border border-white/10",style:{clipPath:"polygon(10% 0%, 90% 0%, 100% 50%, 90% 100%, 10% 100%, 0% 50%)"},children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-pink-500 to-blue-500 animate-pulse"}),e.jsxs("span",{className:"text-white font-medium",children:[k.length," articles"]})]})})]})]})]}),e.jsx("section",{className:"sticky top-20 z-30 bg-black/90 backdrop-blur-xl border-y border-white/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx($,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-pink-400"}),e.jsx("input",{type:"text",value:w,onChange:t=>I(t.target.value),placeholder:"Rechercher un article...",className:"w-full pl-12 pr-4 py-3 bg-gradient-to-r from-pink-500/5 to-blue-500/5 border border-white/10 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-pink-500/50 focus:bg-white/5 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-blue-400"}),e.jsxs("select",{value:D,onChange:t=>R(t.target.value),className:"px-4 py-3 bg-gradient-to-r from-pink-500/5 to-blue-500/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-pink-500/50 appearance-none cursor-pointer",children:[e.jsx("option",{value:"recent",children:"Plus récents"}),e.jsx("option",{value:"popular",children:"Plus populaires"}),e.jsx("option",{value:"trending",children:"Tendances"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-pink-500/10 to-blue-500/10 border border-white/10 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>C("grid"),className:`p-2 rounded-lg transition-all ${g==="grid"?"bg-gradient-to-r from-pink-500 to-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:e.jsx(Q,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>C("list"),className:`p-2 rounded-lg transition-all ${g==="list"?"bg-gradient-to-r from-pink-500 to-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:e.jsx(W,{className:"w-5 h-5"})})]})]})})}),e.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsx(X,{mode:"wait",children:x.length>0?e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:g==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8":"space-y-6",children:x.map((t,o)=>{var l,d;return e.jsx(n.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},children:g==="grid"?e.jsx(m,{to:`/article/${(l=t.slug)==null?void 0:l.current}`,className:"group block",children:e.jsxs("div",{className:"relative bg-gradient-to-br from-white/5 to-white/[0.02] backdrop-blur-sm border border-white/10 overflow-hidden hover:border-pink-500/30 transition-all duration-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500/0 to-blue-500/0 group-hover:from-pink-500/10 group-hover:to-blue-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative aspect-[16/10] overflow-hidden bg-gradient-to-br from-gray-900 to-black",children:[e.jsx(P,{source:t.mainImage,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",fallbackText:t.title}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),t.subcategories&&t.subcategories.length>0&&e.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:e.jsx(B,{subcategories:t.subcategories,variant:"compact",maxVisible:2})})]}),e.jsxs("div",{className:"relative p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-pink-400 group-hover:to-blue-400 transition-all duration-300",children:t.title}),t.excerpt&&e.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-4",children:t.excerpt}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3 text-pink-400"}),t.readingTime||"5 min"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3 text-blue-400"}),"2.3k"]})]}),e.jsx(T,{className:"w-4 h-4 text-pink-400 group-hover:translate-x-1 transition-transform"})]})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-5 h-5 bg-gradient-to-br from-pink-500 to-blue-500 opacity-50 group-hover:opacity-100 transition-opacity"})]})}):e.jsx(m,{to:`/article/${(d=t.slug)==null?void 0:d.current}`,className:"group block",children:e.jsxs("div",{className:"relative bg-gradient-to-br from-white/5 to-white/[0.02] backdrop-blur-sm border border-white/10 overflow-hidden hover:border-pink-500/30 transition-all duration-500 p-6",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500/0 to-blue-500/0 group-hover:from-pink-500/5 group-hover:to-blue-500/5 transition-all duration-500"}),e.jsxs("div",{className:"relative flex gap-6",children:[e.jsx("div",{className:"flex-shrink-0 w-48 h-32 overflow-hidden bg-gradient-to-br from-gray-900 to-black",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%)"},children:e.jsx(P,{source:t.mainImage,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",fallbackText:t.title})}),e.jsxs("div",{className:"flex-1",children:[t.subcategories&&t.subcategories.length>0&&e.jsx(B,{subcategories:t.subcategories,variant:"compact",maxVisible:3,className:"mb-2"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-pink-400 group-hover:to-blue-400 transition-all duration-300",children:t.title}),t.excerpt&&e.jsx("p",{className:"text-gray-400 line-clamp-2 mb-4",children:t.excerpt}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3 text-pink-400"}),t.readingTime||"5 min"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3 text-blue-400"}),"2.3k"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-blue-400 font-medium",children:[e.jsx("span",{children:"Lire l'article"}),e.jsx(T,{className:"w-4 h-4 text-pink-400 group-hover:translate-x-1 transition-transform"})]})]})]})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-gradient-to-br from-pink-500 to-blue-500 opacity-50 group-hover:opacity-100 transition-opacity"})]})})},t._id)})},g):e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex flex-col items-center justify-center w-32 h-32 bg-gradient-to-br from-pink-500/10 to-blue-500/10 border border-white/10 mb-6",style:{clipPath:S},children:e.jsx($,{className:"w-10 h-10 text-gray-500"})}),e.jsx("p",{className:"text-gray-400 text-lg mb-8",children:"Aucun article trouvé dans cette sous-catégorie."}),e.jsxs(m,{to:`/rubrique/${r}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-blue-500 text-white font-semibold rounded-xl hover:shadow-lg hover:shadow-pink-500/25 transition-all",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsxs("span",{children:["Retour à ",a==null?void 0:a.title]})]})]})}),x.length<k.length&&e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center mt-12",children:e.jsxs(n.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:V,className:"relative inline-flex items-center gap-3 px-8 py-4 overflow-hidden group",style:{clipPath:"polygon(10% 0%, 90% 0%, 100% 50%, 90% 100%, 10% 100%, 0% 50%)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500 to-blue-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-400 to-blue-400 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("span",{className:"relative text-white font-bold",children:"Charger plus d'articles"}),e.jsx(Z,{className:"relative w-5 h-5 text-white"})]})})]}),e.jsx(H,{})]})]})}export{he as SubcategoryPage};
