const f={61:"ligue1",39:"premierleague",140:"laliga",135:"seriea",78:"bundesliga",2:"championsleague",3:"europaleague",62:"ligue2"};function p(e){return!e||e===0?"-":e.toFixed(2)}function S(e){return!e||e<=1?0:1/e*100}function v(e){const n=e.odds.winamax;if(!n)return null;const{home:t,draw:r,away:o}=n,s=Math.min(t,r,o);return s===t?"home":s===o?"away":"draw"}const g="/api/odds",m=3*60*1e3,l=new Map;function O(e){const n=l.get(e);return n&&Date.now()-n.timestamp<m?(console.log(`[OddsService] Cache hit for ${e}`),n.data):null}function h(e,n){l.set(e,{data:n,timestamp:Date.now()})}async function $(e){const n=`odds_${e}`,t=O(n);if(t)return t;try{console.log(`[OddsService] Fetching odds for ${e}...`);const r=await fetch(`${g}?sport=${e}`);if(!r.ok)return console.error(`[OddsService] Error ${r.status} for ${e}`),[];const o=await r.json();return!o.success||!o.data?(console.warn(`[OddsService] No data for ${e}`),[]):(console.log(`[OddsService] Got ${o.count} matches for ${e}`),console.log(`[OddsService] API usage: ${o.apiUsage.used}/${o.apiUsage.remaining} remaining`),h(n,o.data),o.data)}catch(r){return console.error(`[OddsService] Exception for ${e}:`,r),[]}}async function w(e){const n=f[e];return n?$(n):(console.warn(`[OddsService] Unknown competition ID: ${e}`),[])}async function y(e,n,t){const r=await w(t);if(!r.length)return null;const o=a=>a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,""),s=o(e),c=o(n),u=r.find(a=>{const i=o(a.homeTeam),d=o(a.awayTeam);return!!(i===s&&d===c||(i.includes(s)||s.includes(i))&&(d.includes(c)||c.includes(d)))});return console.log(u?`[OddsService] Found odds for ${e} vs ${n}`:`[OddsService] No odds found for ${e} vs ${n}`),u||null}export{p as a,y as f,v as g,S as i};
