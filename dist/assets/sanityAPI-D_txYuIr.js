import{R as u,s}from"./index-Bg9Yd0co.js";const n={},l=300*1e3;async function a(e,t){const r=Date.now(),i=n[e];if(i&&r-i.timestamp<l)return i.data;try{const o=await t();return n[e]={data:o,timestamp:r},o}catch(o){throw console.error(`Erreur lors de la récupération des données pour ${e}:`,o),o}}const y=async()=>a("allArticles",async()=>{try{const t=await s.fetch(`*[_type == "article"] | order(publishedAt desc) {
        _id,
        title,
        slug,
        contentType,
        mainImage {
          asset->{
            _ref,
            _type,
            url
          },
          hotspot,
          crop
        },
        excerpt,
        publishedAt,
        keyPoints,
        readingTime,
        duration,
        videoUrl,
        guest,
        isEssential,
        isTrending,
        isFeatured,
        stats,
        categories[]->{
          _id,
          title,
          slug
        },
        subcategories[]->{
          _id,
          title,
          slug,
          parentCategory->{
            _id,
            title,
            slug
          }
        },
        author->{
          _id,
          name,
          "imageUrl": image.asset->url,
          image {
            asset->{
              _ref,
              _type,
              url
            },
            hotspot,
            crop
          },
          bio
        }
      }`);if(t&&t.length>0){const r=[...new Set(t.map(i=>i.contentType))]}return t||[]}catch(e){return console.error("Erreur lors de la récupération des articles:",e),[]}}),g=async(e,t=!1)=>{if(t)try{const i=await u.fetch(`*[_type == "article" && slug.current == $slug][0] {
        _id,
        _rev,
        _type,
        title,
        slug,
        contentType,
        mainImage {
          asset->{
            _ref,
            _type,
            url
          },
          hotspot,
          crop
        },
        body,
        excerpt,
        publishedAt,
        keyPoints,
        readingTime,
        duration,
        videoUrl,
        guest,
        isEssential,
        isTrending,
        isFeatured,
        stats,
        categories[]->{
          _id,
          title,
          slug
        },
        subcategories[]->{
          _id,
          title,
          slug,
          parentCategory->{
            _id,
            title,
            slug
          }
        },
        author->{
          _id,
          name,
          "imageUrl": image.asset->url,
          image {
            asset->{
              _ref,
              _type,
              url
            },
            hotspot,
            crop
          },
          bio
        }
      }`,{slug:e});return i||await u.fetch(`*[_type == "article" && (_id match "drafts.*") && slug.current == $slug][0] {
          _id,
          _rev,
          _type,
          title,
          slug,
          contentType,
          mainImage {
            asset->{
              _ref,
              _type,
              url
            },
            hotspot,
            crop
          },
          body,
          excerpt,
          publishedAt,
          keyPoints,
          readingTime,
          duration,
          videoUrl,
          guest,
          isEssential,
          isTrending,
          isFeatured,
          stats,
          categories[]->{
            _id,
            title,
            slug
          },
          subcategories[]->{
            _id,
            title,
            slug,
            parentCategory->{
              _id,
              title,
              slug
            }
          },
          author->{
            _id,
            name,
            "imageUrl": image.asset->url,
            image {
              asset->{
                _ref,
                _type,
                url
              },
              hotspot,
              crop
            },
            bio
          }
        }`,{slug:e})}catch(r){return console.error(`❌ Erreur lors de la récupération preview de l'article ${e}:`,r),console.error("Détails de l'erreur:",r),null}return a(`article_${e}`,async()=>{try{return await s.fetch(`*[_type == "article" && slug.current == $slug][0] {
        _id,
        title,
        slug,
        contentType,
        mainImage {
          asset->{
            _ref,
            _type,
            url
          },
          hotspot,
          crop
        },
        body,
        excerpt,
        publishedAt,
        keyPoints,
        readingTime,
        duration,
        videoUrl,
        guest,
        isEssential,
        isTrending,
        isFeatured,
        stats,
        categories[]->{
          _id,
          title,
          slug
        },
        subcategories[]->{
          _id,
          title,
          slug,
          parentCategory->{
            _id,
            title,
            slug
          }
        },
        author->{
          _id,
          name,
          "imageUrl": image.asset->url,
          image {
            asset->{
              _ref,
              _type,
              url
            },
            hotspot,
            crop
          },
          bio
        }
      }`,{slug:e})}catch(r){return console.error(`Erreur lors de la récupération de l'article ${e}:`,r),null}})},p=async e=>a(`articles_category_${e}`,async()=>{try{const r=await s.fetch('*[_type == "category" && slug.current == $categorySlug][0]._id',{categorySlug:e});return r?await s.fetch(`*[_type == "article" && references($categoryId)] | order(publishedAt desc) {
        _id,
        title,
        slug,
        contentType,
        mainImage {
          asset->{
            _ref,
            _type,
            url
          },
          hotspot,
          crop
        },
        excerpt,
        publishedAt,
        keyPoints,
        readingTime,
        duration,
        videoUrl,
        guest,
        isEssential,
        isTrending,
        isFeatured,
        stats,
        categories[]->{
          _id,
          title,
          slug
        },
        subcategories[]->{
          _id,
          title,
          slug,
          parentCategory->{
            _id,
            title,
            slug
          }
        }
      }`,{categoryId:r}):[]}catch(t){return console.error(`Erreur lors de la récupération des articles de la catégorie ${e}:`,t),[]}}),_=async e=>a(`category_${e}`,async()=>{try{return await s.fetch(`*[_type == "category" && slug.current == $slug][0] {
        _id,
        title,
        slug,
        description
      }`,{slug:e})}catch(t){return console.error(`Erreur lors de la récupération de la catégorie ${e}:`,t),null}}),h=async()=>a("featuredVSPoll",async()=>{try{return await s.fetch(`*[_type == "vsPoll" && featured == true && active == true] | order(publishedAt desc)[0] {
        _id,
        title,
        question,
        slug,
        option1 {
          name,
          subtitle,
          image {
            asset->{
              _ref,
              _type,
              url
            },
            hotspot,
            crop
          },
          color,
          votes
        },
        option2 {
          name,
          subtitle,
          image {
            asset->{
              _ref,
              _type,
              url
            },
            hotspot,
            crop
          },
          color,
          votes
        },
        context,
        featured,
        active,
        publishedAt,
        endsAt
      }`)}catch(e){return console.error("Erreur lors de la récupération du VS Poll à la une:",e),null}}),m=async e=>a(`articles_subcategory_${e}`,async()=>{try{const r=await s.fetch('*[_type == "subcategory" && slug.current == $subcategorySlug][0]._id',{subcategorySlug:e});return r?await s.fetch(`*[_type == "article" && references($subcategoryId)] | order(publishedAt desc) {
        _id,
        title,
        slug,
        contentType,
        mainImage {
          asset->{
            _ref,
            _type,
            url
          },
          hotspot,
          crop
        },
        excerpt,
        publishedAt,
        keyPoints,
        readingTime,
        duration,
        videoUrl,
        guest,
        isTrending,
        isFeatured,
        isEssential,
        stats,
        categories[]->{
          _id,
          title,
          slug
        },
        subcategories[]->{
          _id,
          title,
          slug,
          parentCategory->{
            _id,
            title,
            slug
          }
        }
      }`,{subcategoryId:r}):[]}catch(t){return console.error(`Erreur lors de la récupération des articles de la sous-catégorie ${e}:`,t),[]}}),b=async e=>a(`subcategory_${e}`,async()=>{try{return await s.fetch(`*[_type == "subcategory" && slug.current == $slug][0] {
        _id,
        title,
        slug,
        description,
        parentCategory->{
          _id,
          title,
          slug
        }
      }`,{slug:e})}catch(t){return console.error(`Erreur lors de la récupération de la sous-catégorie ${e}:`,t),null}}),f=async(e=50)=>a(`octogoalEmissions_${e}`,async()=>{try{return await s.fetch(`*[_type == "emission"] | order(episodeNumber desc)[0...$limit] {
        _id,
        title,
        "slug": slug.current,
        episodeNumber,
        youtubeUrl,
        "thumbnail": thumbnail.asset->url,
        duration,
        description,
        publishedAt,
        themes
      }`,{limit:e})||[]}catch(t){return console.error("Erreur lors de la récupération des émissions Octogoal:",t),[]}}),A=async()=>a("latestOctogoalEmission",async()=>{try{return await s.fetch(`*[_type == "emission"] | order(publishedAt desc)[0] {
        _id,
        title,
        "slug": slug.current,
        episodeNumber,
        youtubeUrl,
        "thumbnail": thumbnail.asset->url,
        duration,
        description,
        publishedAt,
        themes
      }`)}catch(e){return console.error("Erreur lors de la récupération de la dernière émission:",e),null}}),E=async(e=20)=>a(`octogoalExtraits_${e}`,async()=>{try{return await s.fetch(`*[_type == "extrait"] | order(publishedAt desc)[0...$limit] {
        _id,
        title,
        youtubeShortUrl,
        "thumbnail": thumbnail.asset->url,
        duration,
        publishedAt,
        emission->{
          _id,
          title,
          episodeNumber
        }
      }`,{limit:e})||[]}catch(t){return console.error("Erreur lors de la récupération des extraits:",t),[]}});export{E as a,h as b,p as c,_ as d,b as e,m as f,f as g,A as h,y as i,g as j};
