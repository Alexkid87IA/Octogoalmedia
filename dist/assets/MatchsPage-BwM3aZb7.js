import{j as e}from"./sanity-Dli2Tcak.js";import{r as o,L as G}from"./react-vendor-BZT10b4B.js";import{A as ne,d as ie,B as le,C as re,D as oe}from"./index-DFCisg6y.js";import{a as ce,b as de,f as J}from"./oddsService-CRw8dx3o.js";import{m as O,R as W,k as Y,T as V,x as xe,p as me,C as he,A as ge}from"./ui-CXtmN_I9.js";const ue=({homeTeam:s,awayTeam:n,competitionId:a,matchStatus:m="SCHEDULED",variant:d="inline"})=>{const[b,h]=o.useState(null),[N,y]=o.useState(!0);if(o.useEffect(()=>{if(m==="FINISHED"){y(!1);return}(async()=>{try{const f=await de(s,n,a);h(f)}catch(f){console.error("[OddsBadge] Error:",f)}finally{y(!1)}})()},[s,n,a,m]),m==="FINISHED"||N)return null;const p=b==null?void 0:b.odds.winamax;if(!p)return null;const x=ce(b);return d==="inline"?e.jsxs(O.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-1 text-[10px]",title:"Cotes Winamax",children:[e.jsx("img",{src:"/images/winamax-logo.png",alt:"W",className:"w-3.5 h-3.5 rounded object-contain flex-shrink-0"}),e.jsx($,{value:p.home,isFavorite:x==="home"}),e.jsx($,{value:p.draw,isFavorite:x==="draw"}),e.jsx($,{value:p.away,isFavorite:x==="away"})]}):e.jsxs(O.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"flex flex-col items-center bg-white/5 rounded-lg px-3 py-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx("img",{src:"/images/winamax-logo.png",alt:"Winamax",className:"w-4 h-4 rounded object-contain"}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"Winamax"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(F,{label:"1",value:p.home,isFavorite:x==="home"}),e.jsx(F,{label:"N",value:p.draw,isFavorite:x==="draw"}),e.jsx(F,{label:"2",value:p.away,isFavorite:x==="away"})]})]})},$=({value:s,isFavorite:n=!1})=>e.jsx("span",{className:`
      px-1.5 py-0.5 rounded font-medium
      ${n?"bg-green-500/20 text-green-400":"bg-white/10 text-gray-300"}
    `,children:J(s)}),F=({label:s,value:n,isFavorite:a=!1})=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[9px] text-gray-500",children:s}),e.jsx("span",{className:`
        text-xs font-bold
        ${a?"text-green-400":"text-white"}
      `,children:J(n)})]});function u(s){return s.toISOString().split("T")[0]}function q(s){const n=new Date,a=new Date(n);a.setDate(a.getDate()-1);const m=new Date(n);return m.setDate(m.getDate()+1),u(s)===u(n)?"Aujourd'hui":u(s)===u(a)?"Hier":u(s)===u(m)?"Demain":s.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric"})}function pe(){const s=[];for(let n=7;n>=1;n--){const a=new Date;a.setDate(a.getDate()-n),s.push({date:a,label:q(a),dateStr:u(a),isPast:!0})}for(let n=0;n<7;n++){const a=new Date;a.setDate(a.getDate()+n),s.push({date:a,label:q(a),dateStr:u(a),isPast:!1})}return s}function fe(s){return new Date(s).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}const be=({minute:s})=>e.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 bg-red-500/20 border border-red-500/50 rounded-full",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),e.jsx("span",{className:"text-red-400 text-xs font-bold",children:s?`${s}'`:"LIVE"})]}),z=()=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-gray-800/50 rounded-lg mb-3"}),[1,2,3].map(s=>e.jsx("div",{className:"h-20 bg-gray-800/30 rounded-xl mb-2"},s))]}),je=({match:s})=>{const n=s.status==="IN_PLAY"||s.status==="PAUSED",a=s.status==="FINISHED";return e.jsxs(G,{to:`/match/${s.id}`,className:`block p-4 rounded-xl border transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${n?"bg-red-500/5 border-red-500/30 hover:border-red-500/50":"bg-gray-900/50 border-gray-800 hover:border-pink-500/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("img",{src:s.homeTeam.crest,alt:"",className:"w-8 h-8 object-contain flex-shrink-0"}),e.jsx("span",{className:`font-medium truncate ${n?"text-white":"text-gray-200"}`,children:s.homeTeam.name})]}),e.jsx("div",{className:"flex flex-col items-center mx-4 min-w-[80px]",children:n||a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"text-white",children:s.score.fullTime.home??0}),e.jsx("span",{className:"text-gray-600",children:"-"}),e.jsx("span",{className:"text-white",children:s.score.fullTime.away??0})]}),n&&e.jsx(be,{minute:s.minute}),a&&e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Terminé"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg font-bold text-pink-400",children:fe(s.utcDate)}),s.venue&&e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[100px]",children:s.venue})]})}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 justify-end",children:[e.jsx("span",{className:`font-medium truncate text-right ${n?"text-white":"text-gray-200"}`,children:s.awayTeam.name}),e.jsx("img",{src:s.awayTeam.crest,alt:"",className:"w-8 h-8 object-contain flex-shrink-0"})]})]}),!a&&e.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:e.jsx(ue,{homeTeam:s.homeTeam.name,awayTeam:s.awayTeam.name,competitionId:s.competition.id,matchStatus:s.status,variant:"row"})})]})},A=({competition:s,matches:n,isCollapsed:a,onToggle:m})=>{const d=oe[s.id],b=n.filter(h=>h.status==="IN_PLAY"||h.status==="PAUSED").length;return e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-between px-4 py-3 bg-gray-800/50 rounded-t-xl border border-gray-700/50 hover:bg-gray-800/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.emblem?e.jsx("img",{src:s.emblem,alt:"",className:"w-6 h-6 object-contain"}):e.jsx("span",{className:"text-xl",children:(d==null?void 0:d.flag)||"⚽"}),e.jsx("span",{className:"text-white font-semibold",children:s.name}),b>0&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-500/20 text-red-400 text-xs font-bold rounded-full",children:[b," live"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:n.length}),e.jsx(he,{className:`w-5 h-5 text-gray-400 transition-transform ${a?"":"rotate-180"}`})]})]}),e.jsx(ge,{children:!a&&e.jsx(O.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"space-y-2 p-3 bg-gray-900/30 rounded-b-xl border-x border-b border-gray-700/50",children:n.map(h=>e.jsx(je,{match:h},h.id))})})})]})};function Ce(){var U;const s=ne(),n=s.map(t=>t.id),[a,m]=o.useState([]),[d,b]=o.useState([]),[h,N]=o.useState(!0),[y,p]=o.useState(null),[x,P]=o.useState(u(new Date)),[f,K]=o.useState(n),[E,Q]=o.useState(new Set),[r,w]=o.useState("all"),M=o.useRef(null),I=pe(),C=I.findIndex(t=>t.dateStr===u(new Date)),S=o.useCallback(async()=>{try{p(null);const l=(await ie()).filter(g=>{var B;return f.includes((B=g.competition)==null?void 0:B.id)});b(l),console.log("[MatchCenter] Live matches:",l.length);const i=await le(x,f);m(i);const c=i.filter(g=>g.status==="FINISHED").length,j=i.filter(g=>g.status==="SCHEDULED"||g.status==="TIMED").length,v=i.filter(g=>g.status==="IN_PLAY"||g.status==="PAUSED").length;console.log(`[MatchCenter] Matchs du ${x}: ${i.length} total (${c} terminés, ${v} live, ${j} à venir)`);const D=[...new Set(i.map(g=>g.status))];console.log("[MatchCenter] Statuts présents:",D),N(!1)}catch(t){console.error("Erreur chargement matchs:",t),p("Impossible de charger les matchs"),N(!1)}},[x,f]);o.useEffect(()=>(N(!0),S(),M.current=window.setInterval(S,3e4),()=>{M.current&&clearInterval(M.current)}),[S]),o.useEffect(()=>{const t=document.getElementById("days-nav");if(t&&C>=0){const l=t.querySelectorAll("button");if(l[C]){const i=l[C],c=i.offsetLeft-t.clientWidth/2+i.clientWidth/2;t.scrollTo({left:c,behavior:"smooth"})}}},[C]);const X=()=>{K(n)},T=t=>{Q(l=>{const i=new Set(l);return i.has(t)?i.delete(t):i.add(t),i})},R=t=>{const l={};t.forEach(c=>{var v;const j=(v=c.competition)==null?void 0:v.id;j&&(l[j]||(l[j]={competition:c.competition,matches:[]}),l[j].matches.push(c))});const i=re();return Object.entries(l).sort(([c],[j])=>{const v=i.indexOf(Number(c)),D=i.indexOf(Number(j));return v===-1&&D===-1?0:v===-1?1:D===-1?-1:v-D}).map(([,c])=>c)},Z=()=>r==="live"?d:r==="upcoming"?a.filter(t=>t.status==="SCHEDULED"||t.status==="TIMED"):a,_=d.length,ee=a.length,te=a.filter(t=>t.status==="SCHEDULED"||t.status==="TIMED").length,se=a.filter(t=>t.status==="FINISHED").length,k=((U=I.find(t=>t.dateStr===x))==null?void 0:U.isPast)||!1,ae=Z(),L=R(ae),H=R(d);return e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(236,72,153,0.1),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_right,rgba(59,130,246,0.1),transparent_50%)]"})]}),e.jsx("header",{className:"relative pt-24 pb-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Match Center"}),e.jsx("p",{className:"text-gray-400",children:"Tous les matchs en temps réel"})]}),e.jsxs("div",{className:"flex justify-center gap-3 mb-6 flex-wrap",children:[!k&&e.jsxs("button",{onClick:()=>w(r==="live"?"all":"live"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${r==="live"?"bg-red-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(W,{className:"w-4 h-4"}),e.jsxs("span",{children:[_," Live"]})]}),e.jsxs("button",{onClick:()=>w("all"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${r==="all"?k?"bg-violet-500 text-white":"bg-pink-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsxs("span",{children:[ee," ",k?"Résultats":"Matchs"]})]}),k?e.jsxs("button",{onClick:()=>w("all"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${r==="all"?"bg-gray-600 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(V,{className:"w-4 h-4"}),e.jsxs("span",{children:[se," Terminés"]})]}):e.jsxs("button",{onClick:()=>w(r==="upcoming"?"all":"upcoming"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${r==="upcoming"?"bg-blue-500 text-white":"bg-gray-800/50 text-gray-300 hover:bg-gray-800"}`,children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsxs("span",{children:[te," À venir"]})]})]})]})}),e.jsx("div",{className:"sticky top-20 z-40 bg-black/90 backdrop-blur-sm border-y border-gray-800",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4",children:e.jsxs("div",{className:"flex gap-1 py-3 overflow-x-auto scrollbar-hide",id:"days-nav",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center pr-3 mr-2 border-r border-gray-700",children:e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Résultats"})}),I.map((t,l)=>{const i=t.dateStr===u(new Date),c=x===t.dateStr;return e.jsx("button",{onClick:()=>{P(t.dateStr),w("all")},className:`flex-shrink-0 px-4 py-2 rounded-lg font-medium text-sm transition-all ${c?t.isPast?"bg-gradient-to-r from-violet-500 to-violet-600 text-white":"bg-gradient-to-r from-pink-500 to-pink-600 text-white":i?"text-pink-400 bg-pink-500/10 hover:bg-pink-500/20":t.isPast?"text-gray-500 hover:text-gray-300 hover:bg-gray-800/50":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:t.label},t.dateStr)}),e.jsx("div",{className:"flex-shrink-0 flex items-center pl-3 ml-2 border-l border-gray-700",children:e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"À venir"})})]})})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-6 pb-2",children:e.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-hide pb-2",children:[e.jsx("button",{onClick:X,className:`flex-shrink-0 px-4 py-2 rounded-2xl text-xs font-bold uppercase tracking-wider transition-all duration-300 ${f.length===n.length?"bg-gradient-to-r from-pink-500 to-violet-500 text-white shadow-lg shadow-pink-500/25":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:"All"}),e.jsx("div",{className:"w-px h-6 bg-gradient-to-b from-transparent via-gray-700 to-transparent"}),s.map(t=>{const l=f.length===1&&f.includes(t.id);return e.jsxs(G,{to:`/classements/matchday/${t.id}`,className:`group relative flex-shrink-0 px-3 py-2 rounded-2xl transition-all duration-300 ${l?"bg-gradient-to-r from-white/15 to-white/5 shadow-lg":"hover:bg-white/5"}`,title:`Voir les journées - ${t.name}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-base transition-transform duration-300 ${l?"scale-110":"group-hover:scale-105"}`,children:t.flag}),e.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide transition-all duration-300 ${l?"text-white":"text-gray-500 group-hover:text-gray-300"}`,children:t.shortName})]}),e.jsx("span",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-0.5 bg-gradient-to-r from-pink-500 to-violet-500 rounded-full transition-all duration-300 ${l?"w-6 opacity-100":"w-0 opacity-0"}`})]},t.id)})]})}),e.jsxs("main",{className:"relative max-w-5xl mx-auto px-4 py-8",children:[h&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(z,{}),e.jsx(z,{})]}),y&&!h&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:y}),e.jsxs("button",{onClick:S,className:"mt-4 px-6 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors inline-flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),"Réessayer"]})]}),!h&&!y&&e.jsxs(e.Fragment,{children:[r!=="live"&&d.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Matchs en direct"})]}),H.map(t=>e.jsx(A,{competition:t.competition,matches:t.matches,isCollapsed:E.has(t.competition.id),onToggle:()=>T(t.competition.id)},`live-${t.competition.id}`))]}),r==="live"&&d.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(W,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucun match en direct"}),e.jsx("p",{className:"text-gray-500",children:"Il n'y a pas de match en cours actuellement"})]}),r!=="live"&&L.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Y,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucun match"}),e.jsx("p",{className:"text-gray-500",children:"Pas de match prévu pour cette date dans les compétitions sélectionnées"})]}),r==="live"&&d.length>0&&e.jsx(e.Fragment,{children:H.map(t=>e.jsx(A,{competition:t.competition,matches:t.matches,isCollapsed:E.has(t.competition.id),onToggle:()=>T(t.competition.id)},t.competition.id))}),r!=="live"&&L.length>0&&e.jsxs(e.Fragment,{children:[r==="upcoming"&&e.jsx("h2",{className:"text-lg font-semibold text-gray-400 mb-4",children:"Matchs à venir"}),L.map(t=>{const l=r==="all"?t.matches.filter(i=>i.status!=="IN_PLAY"&&i.status!=="PAUSED"):t.matches;return l.length===0?null:e.jsx(A,{competition:t.competition,matches:l,isCollapsed:E.has(t.competition.id),onToggle:()=>T(t.competition.id)},t.competition.id)})]})]}),_>0&&e.jsxs("div",{className:"fixed bottom-4 right-4 px-3 py-2 bg-gray-900/90 backdrop-blur-sm rounded-full border border-gray-700 flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Auto-refresh actif"]})]})]})}export{Ce as default};
