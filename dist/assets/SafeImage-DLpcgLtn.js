import{j as n}from"./sanity-tkM5Czdy.js";import{c}from"./index-CIY2RXXO.js";function g({source:r,alt:t,className:e="",width:p=800,height:i=600,loading:f="lazy",onError:m,fallbackText:o}){if(!r)return n.jsx("img",{src:`https://placehold.co/${p||400}x${i||300}?text=No+Image`,alt:t,className:e,loading:f});if(typeof r=="string")return!r||r.trim()===""?n.jsx("img",{src:`https://placehold.co/${p||400}x${i||300}?text=No+Image`,alt:t,className:e,loading:f}):n.jsx("img",{src:r,alt:t,className:e,loading:f});try{if(r!=null&&r.asset){if(r.asset.url)return n.jsx("img",{src:r.asset.url,alt:t,className:e,loading:f});if(typeof r.asset=="string"&&r.asset.startsWith("http"))return n.jsx("img",{src:r.asset,alt:t,className:e,loading:f});if(r.asset._ref){const x=r.asset._ref;if(!x||x===""||x===null||x===void 0)return console.warn("Empty asset reference detected for image:",t),n.jsx("img",{src:`https://placehold.co/${p||400}x${i||300}?text=Invalid+Reference`,alt:t,className:e,loading:f});if(x.startsWith("http"))return n.jsx("img",{src:x,alt:t,className:e,loading:f});if(x.includes("image-"))try{const s=c(r).width(p||800).height(i||600).url();if(!s)throw new Error("Empty URL generated from Sanity reference");return n.jsx("img",{src:s,alt:t,className:e,loading:f,onError:$=>{console.error("Failed to load Sanity image:",s),m&&m(),$.target.src=`https://placehold.co/${p||400}x${i||300}?text=${encodeURIComponent(o||"Image Error")}`}})}catch(s){return console.error("Error generating Sanity URL:",s),n.jsx("img",{src:`https://placehold.co/${p||400}x${i||300}?text=Sanity+Error`,alt:t,className:e,loading:f})}return console.warn("Invalid reference format:",x),n.jsx("img",{src:`https://placehold.co/${p||400}x${i||300}?text=Invalid+Format`,alt:t,className:e,loading:f})}}return r!=null&&r.url?n.jsx("img",{src:r.url,alt:t,className:e,loading:f}):n.jsx("img",{src:`https://placehold.co/${p||400}x${i||300}?text=Image`,alt:t,className:e,loading:f})}catch(x){return console.error("Erreur SafeImage:",x),m&&m(),n.jsx("img",{src:`https://placehold.co/${p||400}x${i||300}?text=Erreur`,alt:t,className:e,loading:f})}}export{g as S};
